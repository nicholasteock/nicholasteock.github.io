{"version":3,"sources":["app/application.js","app/initialize.js","app/preload.js","app/preloader.js","app/reqAnimFramePolyfill.js","app/shaker.js","app/swiper.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArMA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/FA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArHA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;AAAA","file":"public/js/app.js","sourcesContent":["// Hosted on: http://bitly.com/1z99Dhc\nvar freeze \t\t\t\t\t= false;\nvar ingredientCount \t\t= 5;\nvar currentIngredientIdx \t= 0;\nvar currentStageIdx \t\t= 0;\nvar tossCount \t\t\t\t= 0;\nvar maxTosses \t\t\t\t= 3;\nvar stageNames \t\t\t\t= ['main', 'ingredients', 'tossing', 'share'];\nvar url \t\t\t\t\t= encodeURIComponent('http://bitly.com/1z99Dhc');\nvar shareMessage \t\t\t= encodeURIComponent(\"Happy Chinese New year, I wish you prosperity, wealth and success! Letâ€™s share a Lou Hei together, click on the link to start it with me! \" + url);\n\nvar initialize = function() {\n\n\t$('.app-stage').click();\n\t$('.stage').addClass('hide');\n\t$('.in').removeClass('in');\n\t$('.bounce').removeClass('bounce');\n\n\t// $('.main-stage').removeClass('hide');\n\t// $('.ingredients-stage').removeClass('hide');\n\t// showIngredient();\n\t// $('.tossing-stage').removeClass('hide');\n\t// $('.main-stage').addClass('hide');\n\t// $('.share-stage').removeClass('hide');\n\n\tcurrentIngredientIdx \t= 0;\n\tcurrentStageIdx \t\t= 0;\n\ttossIdx \t\t\t\t= 0;\n\n\t$('.app-stage').removeClass('hide');\n\t$(document).trigger('disable_shaker');\n};\n\nvar plateClickHandler = function() {\n\tif(freeze) return; // Event lock\n\tfreeze = true; // Enable lock\n\n\tfunction showIngredients(currentIdx, lastIdx) {\n\n\t\t$('.js-plate-'+currentIdx).addClass('hide');\n\t\t$('.js-plate-'+(currentIdx+1)).removeClass('hide');\n\t\tif(currentIdx < lastIdx) {\n\t\t\tsetTimeout(function() {\n\t\t\t\twindow.requestAnimFrame(function() {\n\t\t\t\t\tshowIngredients(currentIdx+1, lastIdx);\n\t\t\t\t});\n\t\t\t}, 1000/6);\n\t\t}\n\t\telse {\n\t\t\tsetTimeout( function() {\n\t\t\t\tfreeze = false; // Release lock\n\t\t\t\tnextStage();\n\t\t\t\tshowIngredient();\n\t\t\t}, 500);\n\t\t}\n\t}\n\twindow.requestAnimFrame(function() {\n\t\tshowIngredients(0, 5);\n\t});\n};\n\nvar showIngredient = function() {\n\tif(freeze) return; // Event lock\n\tfreeze = true; // Enable lock\n\n\t$('.in').removeClass('in');\n\t$('.bounce').removeClass('bounce');\n\n\t$('.js-ingredient-'+currentIngredientIdx).removeClass('hide').addClass('in');\n\n\tsetTimeout(function() {\n\t\tfreeze = false; // Release lock\n\t\treturn;\n\t}, 1200);\n};\n\nvar showIngredientDesc = function() {\n\tif(freeze) return;\n\tfreeze = true;\n\n\t$('.in').removeClass('in');\n\t$('.bounce').removeClass('bounce');\n\n\t$('.js-ingredient-'+currentIngredientIdx).addClass('hide').addClass('in');\n\t$('.js-desc-'+currentIngredientIdx).addClass('bounce');\n\t$('.js-main-'+(currentIngredientIdx)).addClass('hide');\n\t$('.js-main-'+(currentIngredientIdx+1)).removeClass('hide');\n\n\tcurrentIngredientIdx++;\n\tsetTimeout(function() {\n\t\tfreeze = false;\n\t\tisLastIngredient() ? nextStage() : showIngredient();\n\t}, 3700);\n};\n\nvar showShareButtons = function() {\n\n\tvar hideChunks = function (chunkIdx, totalChunks) {\n\t\t$('.js-chunk-'+chunkIdx).addClass('hide');\n\t\tif(chunkIdx < totalChunks-1) {\n\t\t\tsetTimeout(function() {\n\t\t\t\twindow.requestAnimFrame(function() {\n\t\t\t\t\thideChunks(chunkIdx+1, totalChunks);\n\t\t\t\t});\n\t\t    }, 1000 / 3);\n\t\t}\n\t\telse {\n\t\t\t$('.js-message-0').addClass('hide');\n\t\t\t$('.js-message-1').removeClass('hide').addClass('bounce');\n\t\t\t$('.share-container').addClass('in');\n\t\t\t$('.credits-container').addClass('in');\n\t\t}\n\t};\n\twindow.requestAnimFrame(function() {\n\t\thideChunks(0,6); // Start from 1, total 5 chunks\n\t});\n};\n\nvar doToss = function( callback ) {\n\t\n\tfunction animateToss(currentFrameIdx, totalFrames) {\n\t\t$('.js-toss-'+currentFrameIdx).addClass('hide');\n\t\t$('.js-toss-'+(currentFrameIdx+1)).removeClass('hide');\n\n\t\tif(currentFrameIdx < totalFrames-1) {\n\t\t\t\twindow.requestAnimFrame(function() {\n\t\t\t\t\tanimateToss(currentFrameIdx+1, totalFrames);\n\t\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t$('.js-toss-'+(currentFrameIdx+1)).addClass('hide');\n\t\t\t$('.js-tossbase').addClass('hide');\n\t\t\tcallback();\n\t\t}\n\t}\n\twindow.requestAnimFrame(function() {\n\t\tanimateToss(0, 17);\n\t});\n};\n\nvar isLastIngredient = function() {\n\treturn currentIngredientIdx === ingredientCount;\n};\n\nvar nextStage = function() {\n\t$('.' + stageNames[currentStageIdx] + '-stage').addClass('hide');\n\tcurrentStageIdx++;\n\t$('.' + stageNames[currentStageIdx] + '-stage').removeClass('hide');\n\n\tif(stageNames[currentStageIdx] === 'tossing') {\n\t\t$(document).trigger('enable_shaker');\n\t}\n\treturn;\n};\n\nvar shareLink = function() {\n\t// Prefix message with url scheme.\n\turl = \"whatsapp://send?text=\" + shareMessage;\n\tlocation.href = url;\n};\n\nvar toss = function() {\n\t$(document).trigger('disable_shaker'); // Disable shaker while tossing.\n\n\t$('.toss-banner').addClass('opaque');\n\t$('.toss-base').addClass('hide');\n\t$('.js-tossbase').removeClass('hide');\n\n\tvar tossCallback = function() {\n\t\ttossCount += 1;\n\t\tconsole.log('In callback', tossCount);\n\n\t\t$('.js-tossmessage-'+(tossCount-1)).addClass('hide');\n\t\t$('.js-tossmessage-'+tossCount).removeClass('opaque hide');\n\t\t$('.js-tossbase-'+tossCount).removeClass('hide');\n\t\t\n\t\tif(tossCount < maxTosses) {\n\t\t\t$(document).trigger('enable_shaker');\n\t\t}\n\t\telse {\n\t\t\tnextStage();\n\t\t}\n\t};\n\tdoToss(tossCallback);\n};\n\nmodule.exports = {\n\tinitialize \t\t\t: initialize,\n\tplateClickHandler \t: plateClickHandler,\n\tshowIngredient \t\t: showIngredient,\n\tshowIngredientDesc \t: showIngredientDesc,\n\tisLastIngredient \t: isLastIngredient,\n\tnextStage \t\t\t: nextStage,\n\ttoss \t\t\t\t: toss,\n\tshowShareButtons \t: showShareButtons,\n\tshareLink\t\t\t: shareLink\n};\n","var reqAnimFrame = require('reqAnimFramePolyfill');\nvar shaker \t\t\t= require('shaker');\nvar application \t= require('application');\n// require('swiper');\n\n$(function() {\n\t$('.loading-overlay').addClass('hide');\n\tnick = application;\n\tapplication.initialize();\n\n\t// $('.app-stage').click(function() {\n\t// \tif (!document.fullscreenElement &&    // alternative standard method\n //      !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {\n\t// \t\tif (document.documentElement.requestFullscreen) {\n\t// \t      document.documentElement.requestFullscreen();\n\t// \t    } else if (document.documentElement.msRequestFullscreen) {\n\t// \t      document.documentElement.msRequestFullscreen();\n\t// \t    } else if (document.documentElement.mozRequestFullScreen) {\n\t// \t      document.documentElement.mozRequestFullScreen();\n\t// \t    } else if (document.documentElement.webkitRequestFullscreen) {\n\t// \t      document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n\t// \t    }\n\t// \t}\n\t// });\n\n\t$('.main-stage .js-plate-0').click(function() {\n\t\t$(\".audio-player\")[0].play();\n\t\tapplication.plateClickHandler();\n\t});\n\n\t$('.ingredients-stage .small-plate').click(function() {\n\t\tapplication.showIngredientDesc();\n\t});\n\n\t$('.share-stage .chunks-container').click(function() {\n\t\tapplication.showShareButtons();\n\t});\n\n\t$('.js-share-whatsapp').click(function() {\n\t\t$(\".audio-player\")[0].pause();\n\t\tsetTimeout( function() {\n\t\t\tapplication.shareLink();\n\t\t}, 100);\n\t});\n\n\t$('.share-link').click(function(el) {\n\t\t$(\".audio-player\")[0].pause();\n   \t\tthis.setSelectionRange(0, 25);\n\t});\n\n\t$(document).on('enable_shaker', function() {\n\t\tshaker.enable();\n\t});\n\n\t$(document).on('disable_shaker', function() {\n\t\tshaker.disable();\n\t});\n\n\t$(document).on('protoss', function() {\n\t\tapplication.toss();\n\t});\n\n\t/********************************************************\n\t* Page visibility API \n\t********************************************************/\n\t\n\tvar hidden, state, visibilityChange; \n\tif (typeof document.hidden !== \"undefined\") {\n\t\thidden = \"hidden\";\n\t\tvisibilityChange = \"visibilitychange\";\n\t\tstate = \"visibilityState\";\n\t} else if (typeof document.mozHidden !== \"undefined\") {\n\t\thidden = \"mozHidden\";\n\t\tvisibilityChange = \"mozvisibilitychange\";\n\t\tstate = \"mozVisibilityState\";\n\t} else if (typeof document.msHidden !== \"undefined\") {\n\t\thidden = \"msHidden\";\n\t\tvisibilityChange = \"msvisibilitychange\";\n\t\tstate = \"msVisibilityState\";\n\t} else if (typeof document.webkitHidden !== \"undefined\") {\n\t\thidden = \"webkitHidden\";\n\t\tvisibilityChange = \"webkitvisibilitychange\";\n\t\tstate = \"webkitVisibilityState\";\n\t}\n\n\tdocument.addEventListener(visibilityChange, function() {\n\t\tif (document[hidden]) {\n\t\t\t$(\".audio-player\")[0].pause();\n\t\t}\n\t\telse {\n\t\t\t$(\".audio-player\")[0].play();\n\t\t}\n\t}, false);\n\t/********************************************************/\n});\n","module.exports = function(imageArr, callback){\n\tvar $progress = $('#progress').text('0%'),\n\t\tloader = new PxLoader();\n\n\t// loader.addProgressListener(function(e) { \n // \t\tconsole.log(e.completedCount + ' / ' + e.totalCount);\n\t//     // the event provides stats on the number of completed items \n\t//     $progress.innerHt(e.completedCount + ' / ' + e.totalCount); \n\t// });\n\n\tloader.addCompletionListener(callback);\n\n\tfor(var i= 0; i < imageArr.length; i++){\n\t\tvar pxImage = new PxLoaderImage(imageArr[i]); \n\t\tloader.addImage(pxImage);\n\t}\n\n\tthis.start = function() {\n\t\tloader.start();\n\t};\n\n\treturn this;\n}\n\n\n// PRELOADER PRELOADER PRELOADER PRELOADER PRELOADER","module.exports = function(callback) {\n\n\tvar Preload = require('preload');\n\n\tvar preload = new Preload(\n\t\t[\n\t\t\t'images/rotate_device.png',\n\t\t\t'images/firstpage/logo.png',\n\t\t\t'images/firstpage/firstpage_welcome_text.png',\n\t\t\t'images/firstpage/loadingplates_01.png',\n\t\t\t'images/firstpage/loadingplates_02.png',\n\t\t\t'images/firstpage/loadingplates_03.png',\n\t\t\t'images/firstpage/loadingplates_04.png',\n\t\t\t'images/firstpage/loadingplates_05.png',\n\t\t\t'images/firstpage/loadingplates_06.png',\n\t\t\t'images/firstpage/loadingplates_07.png',\n\t\t\t'images/ingredients/add_fish_text.png',\n\t\t\t'images/ingredients/add_lime_text.png',\n\t\t\t'images/ingredients/add_peppercinnamon_text.png',\n\t\t\t'images/ingredients/add_sauce_text.png',\n\t\t\t'images/ingredients/add_crackers_text.png',\n\t\t\t'images/ingredients/fish_text.png',\n\t\t\t'images/ingredients/lime_text.png',\n\t\t\t'images/ingredients/peppercinnamon_text.png',\n\t\t\t'images/ingredients/sauce_text.png',\n\t\t\t'images/ingredients/crackers_text.png',\n\t\t\t'images/ingredients/mainplate_ingredients_0.png',\n\t\t\t'images/ingredients/mainplate_ingredients_1.png',\n\t\t\t'images/ingredients/mainplate_ingredients_2.png',\n\t\t\t'images/ingredients/mainplate_ingredients_3.png',\n\t\t\t'images/ingredients/mainplate_ingredients_4.png',\n\t\t\t'images/ingredients/mainplate_ingredients_5.png',\n\t\t\t'images/ingredients/miniplate_0.png',\n\t\t\t'images/ingredients/miniplate_1.png',\n\t\t\t'images/ingredients/miniplate_2.png',\n\t\t\t'images/ingredients/miniplate_3.png',\n\t\t\t'images/ingredients/miniplate_4.png',\n\t\t\t'images/tossing/tossing_start_text.png',\n\t\t\t'images/tossing/tossing_halfway_text.png',\n\t\t\t'images/tossing/mainplate_tossed_start.png',\n\t\t\t'images/tossing/mainplate_tossed_halfway.png',\n\t\t\t'images/tossing/mainplate_tossed_completely.png',\n\t\t\t'images/tossing/tossing_0.png',\n\t\t\t'images/tossing/tossing_1.png',\n\t\t\t'images/tossing/tossing_2.png',\n\t\t\t'images/tossing/tossing_3.png',\n\t\t\t'images/tossing/tossing_4.png',\n\t\t\t'images/tossing/tossing_5.png',\n\t\t\t'images/tossing/tossing_6.png',\n\t\t\t'images/tossing/tossing_7.png',\n\t\t\t'images/tossing/tossing_8.png',\n\t\t\t'images/sharing/share_start_text.png',\n\t\t\t'images/sharing/share_end_text.png',\n\t\t\t'images/sharing/mainplate_eaten.png',\n\t\t\t'images/mainplate_eatenpiece_0.png',\n\t\t\t'images/mainplate_eatenpiece_1.png',\n\t\t\t'images/mainplate_eatenpiece_2.png',\n\t\t\t'images/mainplate_eatenpiece_3.png',\n\t\t\t'images/mainplate_eatenpiece_4.png',\n\t\t\t'images/mainplate_eatenpiece_5.png',\n\t\t\t'images/sharing/icon_wa.png',\n\t\t\t'images/sharing/icon_sms.png',\n\t\t\t'images/sharing/logo.png'\n\t\t],\n\t\tcallback\n\t);\n\n\tpreload.start();\n};","window.requestAnimFrame = (function(){\n  return  window.requestAnimationFrame       || \n\t\t  window.webkitRequestAnimationFrame || \n\t\t  window.mozRequestAnimationFrame    || \n\t\t  window.oRequestAnimationFrame      || \n\t\t  window.msRequestAnimationFrame     || \n\t\t  function(/* function */ callback, /* DOMElement */ element){\n\t\t\twindow.setTimeout(callback, 1000 / 60);\n\t\t  };\n})();","/******************************************************************************\n\tshaker.js\n\t\n\t- Handles device orientation.\n\n\t- When device orientation changes, we monitor the change and sense the\n\t  orientation.\n\n\t- Depending on orientation ( forwards / backwards ) we can then make the \n\t  required trigger which is handled in index.js\n\n******************************************************************************/\n\nvar deviceType,\n\tANDROID = 0,\n\tIOS = 1,\n\tWINDOWS = 2,\n\tUNKNOWN = -1;\n\nif (/Android/i.test(navigator.userAgent)) {\n\tdeviceType = ANDROID;\n} else if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\n\tdeviceType = IOS;\n}else if (/Windows/i.test(navigator.userAgent)) {\n\tdeviceType = WINDOWS;\n} else {\n\tdeviceType = UNKNOWN;\n}\n\nvar enabled \t\t\t= false;\nvar highpointReached \t= false;\nvar preventToss \t\t= false;\n\nvar enable = function() {\n\tenabled = true;\n\tif (window.DeviceMotionEvent) {\n\t  // Listen for the event and handle DeviceOrientationEvent object\n\t  // window.addEventListener( 'deviceorientation', tiltHandler );\n\t  window.addEventListener( 'devicemotion', tiltHandler );\n\t}\n\telse {\n\t\tconsole.error('DeviceMotionEvent undefined');\n\t}\n\treturn;\n};\n\nvar disable = function() {\n\tenabled = false;\n\tif (window.DeviceMotionEvent) {\n\t  // Listen for the event and handle DeviceOrientationEvent object\n\t  // window.addEventListener( 'deviceorientation', tiltHandler );\n\t  window.removeEventListener( 'devicemotion', tiltHandler );\n\t}\n\telse {\n\t\tconsole.error('DeviceMotionEvent undefined');\n\t}\n\treturn;\n};\n\nvar androidTiltHandler = function(evt) {\n\tvar zAcceleration = Math.round(evt.accelerationIncludingGravity.z);\n\n\t// $(\"#debug2\").html(\"<h3>Android Acceleration</h3><ul><li>X: \"+Math.round(evt.accelerationIncludingGravity.x)+\"</li><li>Y: \"+Math.round(evt.accelerationIncludingGravity.y)+\"</li><li>Z: \"+Math.round(evt.accelerationIncludingGravity.z)+\"</li></ul>\");\n\t// $(\"#debug3\").html(\"<h3>Rotation</h3><ul><li>X: \"+Math.round(evt.rotationRate.alpha)+\"</li><li>Y: \"+Math.round(evt.rotationRate.beta)+\"</li><li>Z: \"+Math.round(evt.rotationRate.gamma)+\"</li></ul>\");\n\t// $(\"#debug4\").html(\"<h3>Prevent Toss</h3><ul><li>\"+preventToss+\"</li></ul>\");\n\n\tif(zAcceleration > 0) {\n\t\tif(!highpointReached) {\n\t\t\thighpointReached = true;\n\t\t}\n\t\treturn;\n\t}\n\tif(zAcceleration < 10 && highpointReached) {\n\t\thighpointReached = false;\n\t\tdisable(); // Disable further tosses while showing toss.\n\t\t$(document).trigger('protoss'); // Trigger tossing\n\t}\n}\n\nvar iosTiltHandler = function(evt) {\n\tvar zAcceleration = Math.round(evt.accelerationIncludingGravity.z);\n\n\t// $(\"#debug2\").html(\"<h3>IOS Acceleration</h3><ul><li>X: \"+Math.round(evt.accelerationIncludingGravity.x)+\"</li><li>Y: \"+Math.round(evt.accelerationIncludingGravity.y)+\"</li><li>Z: \"+Math.round(evt.accelerationIncludingGravity.z)+\"</li></ul>\");\n\t// $(\"#debug3\").html(\"<h3>Rotation</h3><ul><li>X: \"+Math.round(evt.rotationRate.alpha)+\"</li><li>Y: \"+Math.round(evt.rotationRate.beta)+\"</li><li>Z: \"+Math.round(evt.rotationRate.gamma)+\"</li></ul>\");\n\t// $(\"#debug4\").html(\"<h3>Prevent Toss</h3><ul><li>\"+preventToss+\"</li></ul>\");\n\n\tif(zAcceleration >= 2) {\n\t\tif(!highpointReached) {\n\t\t\thighpointReached = true;\n\t\t}\n\t\treturn;\n\t}\n\tif(zAcceleration <= -12 && highpointReached) {\n\t\thighpointReached = false;\n\t\tdisable(); // Disable further tosses while showing toss.\n\t\t$(document).trigger('protoss'); // Trigger tossing\n\t}\n};\n\nfunction tiltHandler( evt ) {\n\tif(!enabled) return;\n\n\tif (deviceType === ANDROID) {\n\t\tandroidTiltHandler(evt);\n\t} else if (deviceType === IOS || deviceType === WINDOWS) {\n\t\tiosTiltHandler(evt);\n\t}\n};\n\nvar supportsTilt = function() {\n\treturn (window.DeviceOrientationEvent && typeof window.orientation !== \"undefined\");\n};\n\nmodule.exports = {\n\tsupportsTilt: supportsTilt,\n\tenable \t\t: enable,\n\tdisable \t: disable\n};","var reqAnimationFrame = (function () {\n    return window[Hammer.prefixed(window, 'requestAnimationFrame')] || function (callback) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n})();\n\nvar screen = document.querySelector(\".ingredients-stage\");\nvar el = document.getElementById('mini-plate-container');\n\n// var START_X = Math.round(el.offsetWidth);\n// var START_Y = Math.round(el.offsetHeight);\n\nvar START_X = 0;\nvar START_Y = -1100;\n\nvar miniPlateContainer = new Hammer(el);\n\nminiPlateContainer.get('swipe').set({ direction: Hammer.DIRECTION_VERTICAL });\n\nminiPlateContainer.on('swipe', onSwipe);\n\nvar ticking = false;\nvar transform;\nvar timer;\n\nfunction resetElement() {\n    el.className = 'animate';\n    transform = {\n        translate: { x: START_X, y: START_Y },\n        scale: 1,\n        angle: 0,\n        rx: 0,\n        ry: 0,\n        rz: 0\n    };\n    requestElementUpdate();\n};\n\nfunction updateElementTransform() {\n    var value = [\n        'translate3d(' + transform.translate.x + 'px, ' + transform.translate.y + 'px, 0)',\n        'scale(' + transform.scale + ', ' + transform.scale + ')',\n        'rotate3d('+ transform.rx +','+ transform.ry +','+ transform.rz +','+  transform.angle + 'deg)'\n    ];\n\n    value = value.join(\" \");\n    el.style.webkitTransform = value;\n    el.style.mozTransform = value;\n    el.style.transform = value;\n    ticking = false;\n};\n\nfunction requestElementUpdate() {\n    if(!ticking) {\n        reqAnimationFrame(updateElementTransform);\n        ticking = true;\n    }\n};\n\nfunction onSwipe(ev) {\n    var angle = 50;\n    transform.ry = (ev.direction & Hammer.DIRECTION_HORIZONTAL) ? 1 : 0;\n    transform.rx = (ev.direction & Hammer.DIRECTION_VERTICAL) ? 1 : 0;\n    transform.angle = (ev.direction & (Hammer.DIRECTION_RIGHT | Hammer.DIRECTION_UP)) ? angle : -angle;\n\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n        resetElement();\n    }, 300);\n\n    requestElementUpdate();\n};\n\nresetElement();\n\n\n\n"]}