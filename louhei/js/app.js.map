{"version":3,"sources":["app/application.js","app/initialize.js","app/preload.js","app/preloader.js","app/shaker.js","app/swiper.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7NA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArHA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;AAAA","file":"public/js/app.js","sourcesContent":["// Hosted on: http://bitly.com/1z99Dhc\nvar freeze \t\t\t\t\t= false;\nvar ingredientCount \t\t= 4;\nvar currentIngredientIdx \t= 0;\nvar currentStageIdx \t\t= 0;\nvar tossCount \t\t\t\t= 0;\nvar maxTosses \t\t\t\t= 2;\nvar stageNames \t\t\t\t= ['main', 'ingredients', 'toss', 'share'];\nvar url \t\t\t\t\t= encodeURIComponent('http://bitly.com/1z99Dhc');\nvar shareMessage \t\t\t= \"Hi there! Let's Lou Hei together at: \" + url;\n\nvar initialize = function() {\n\t$('.stage').addClass('hide');\n\t$('.plate').addClass('hide');\n\t$('.share-container').removeClass('in');\n\t$('.credits').removeClass('in');\n\t$('.ingredient-banner').addClass('hide');\n\t$('.desc-banner').addClass('hide');\n\t$('.main-plate').addClass('hide');\n\t$('.mini-plate').addClass('hide');\n\t$('.chunk-plate').removeClass('hide');\n\t$('.bounce').removeClass('bounce');\n\n\t$('.main-stage').removeClass('hide');\n\t// $('.toss-stage').removeClass('hide');\n\t$('.js-plate-0').removeClass('hide');\n\t$('.js-main-0').removeClass('hide');\n\t$('.js-toss-0').removeClass('hide');\n\n\tcurrentIngredientIdx \t= 0;\n\tcurrentStageIdx \t\t= 0;\n\ttossIdx \t\t\t\t= 0;\n\n\t$(document).trigger('disable_shaker');\n};\n\nvar plateClickHandler = function() {\n\tif(freeze) return;\n\n\tfreeze = true;\n\n\tvar i = 0;\n\tvar lastIngredient = 6;\n\n\tvar showIngredients = function () {\n\t\tvar lastIngredient = 6;\n\n\t\t// Transit to next stage (adding ingredients)\n\t\tif (i >= lastIngredient) {\n\t\t\tsetTimeout( function() {\n\t\t\t\tfreeze = false;\n\t\t\t\tnextStage();\n\t\t\t\tshowIngredient();\n\t\t\t}, 1400);\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(function () {\n\t\t\t$('.js-plate-'+i).addClass('hide');\n\t\t\ti++;\n\t\t\t$('.js-plate-'+i).removeClass('hide');\n\t\t\tshowIngredients();\n\t\t}, 400);\n\t};\n\n\tshowIngredients();\n};\n\nvar showIngredient = function() {\n\tif(freeze) return;\n\tfreeze = true;\n\n\t$('.ingredient-banner').addClass('hide');\n\t$('.js-ingredient-'+currentIngredientIdx).removeClass('hide');\n\t\n\t$('.desc-banner').removeClass('bounce').addClass('hide');\n\t$('.js-desc-'+currentIngredientIdx).addClass('bounce').removeClass('hide');\n\t\n\t$('.mini-plate').addClass('hide');\n\t$('.js-mini-'+currentIngredientIdx).removeClass('hide');\n\n\t$('.ingredient-name-container').addClass('in');\n\t$('.ingredient-desc-container').addClass('hide');\n\t$('.mini-plate-container').addClass('in');\n\n\tsetTimeout(function() {\n\t\tfreeze = false;\n\t\treturn;\n\t}, 1200);\n};\n\nvar showIngredientDesc = function() {\n\tif(freeze) return;\n\tfreeze = true;\n\n\t$('.ingredient-name-container').removeClass('in');\n\t$('.ingredient-desc-container').removeClass('hide');\n\t$('.main-plate').addClass('hide');\n\t$('.js-main-'+(currentIngredientIdx+1)).removeClass('hide');\n\t$('.mini-plate-container').removeClass('in');\n\n\tcurrentIngredientIdx++;\n\tsetTimeout(function() {\n\t\tfreeze = false;\n\t\tisLastIngredient() ? nextStage() : showIngredient();\n\t}, 2400);\n};\n\nvar showShareButtons = function() {\n\tvar $plate = $(\".chunk-plate-container\");\n\n\tvar hideChunks = function (chunkIdx, totalChunks) {\n\t\t$plate.find('.js-chunk-'+chunkIdx).addClass('hide');\n\t\tsetTimeout(function() {\n\t\t\tif (chunkIdx === totalChunks-1) {\n\t\t\t\t$('.js-message-0').addClass('hide');\n\t\t\t\t$('.js-message-1').removeClass('hide').addClass('bounce');\n\t\t\t\t$('.share-container').addClass('in');\n\t\t\t\t$('.credits').addClass('in');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thideChunks(chunkIdx+1, totalChunks);\n\t\t\t}\n\t\t}, 250);\n\t};\n\thideChunks(0,5); // Start from 1, total 5 chunks\n};\n\nvar doToss = function() {\n\tvar $plate = $(\".toss-plate-container\");\n\n\tvar toss = function(initialFrameIdx, currentFrameIdx, totalFrames) {\n\t\t$plate.find('.js-toss-'+currentFrameIdx).addClass('hide');\n        $plate.find('.js-toss-'+(currentFrameIdx+1)).removeClass('hide');\n\t\tsetTimeout(function() {\n\t\t\tif(currentFrameIdx !== totalFrames-1) {\n\t\t\t\ttoss(initialFrameIdx, currentFrameIdx+1, totalFrames);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$plate.find('.js-toss-'+(totalFrames)).addClass('hide');\n\t\t\t\t$plate.find('.js-toss-'+(initialFrameIdx)).removeClass('hide');\n\t\t\t}\n\t\t}, 100);\n\t};\n\n\ttoss(0,0,8); // Start from frame 0 with total 9 frames.\n};\n\nvar isLastIngredient = function() {\n\treturn currentIngredientIdx === ingredientCount;\n};\n\nvar nextStage = function() {\n\t$('.' + stageNames[currentStageIdx] + '-stage').addClass('hide');\n\tcurrentStageIdx++;\n\t$('.' + stageNames[currentStageIdx] + '-stage').removeClass('hide');\n\n\tif(stageNames[currentStageIdx] === 'toss') {\n\t\t$(document).trigger('enable_shaker');\n\t}\n\treturn;\n};\n\nvar shareLink = function(type) {\n\t// Prefix message with url scheme.\n\tswitch (type) {\n\t\tcase 'whatsapp':\n\t\t\turl = \"whatsapp://send?text=\" + shareMessage;\n\t\t\tbreak;\n\t\tcase 'sms':\n\t\t\tif (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\n\t\t\t\turl = \"sms:;body=\" + shareMessage;\n\t\t\t}\n\t\t\telse if (/Android/i.test(navigator.userAgent)) {\n\t\t\t\turl = \"sms:?body=\" + shareMessage;\n\t\t\t}\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t};\n\tlocation.href = url;\n};\n\nvar toss = function() {\n\tconsole.log('Play animation.');\n\t$(document).trigger('disable_shaker'); // Disable shaker while tossing.\n\n\tif(tossCount === 0) {\n\t\t$('.js-tossmessage-0').addClass('hide');\n\t}\n\telse {\n\t\t$('.js-tossmessage-1').addClass('hide');\n\t}\n\n\tdoToss(); // Animate\n\t\n\ttossCount += 1;\n\n\tsetTimeout(function() {\n\t\tif(tossCount >= maxTosses) {\n\t\t\tnextStage();\n\t\t}\n\t\telse {\n\t\t\t\t$('.js-tossmessage-1').removeClass('hide');\n\t\t\t\t$(document).trigger('enable_shaker');\n\t\t}\n\t}, 900);\n};\n\nmodule.exports = {\n\tinitialize \t\t\t: initialize,\n\tplateClickHandler \t: plateClickHandler,\n\tshowIngredient \t\t: showIngredient,\n\tshowIngredientDesc \t: showIngredientDesc,\n\tisLastIngredient \t: isLastIngredient,\n\tnextStage \t\t\t: nextStage,\n\ttoss \t\t\t\t: toss,\n\tshowShareButtons \t: showShareButtons,\n\tshareLink\t\t\t: shareLink\n};\n","var shaker \t\t\t= require('shaker');\nvar application \t= require('application');\n// require('swiper');\n\n$(function() {\n\t$('.loading-overlay').addClass('hide');\n\t\n\tapplication.initialize();\n\n\t$('.main-stage .js-plate-0').click(function() {\n\t\tapplication.plateClickHandler();\n\t});\n\n\t$('.ingredients-stage .mini-plate-container').click(function() {\n\t\tapplication.showIngredientDesc();\n\t});\n\n\t$('.share-stage .chunk-plate-container').click(function() {\n\t\tapplication.showShareButtons();\n\t});\n\n\t$('.js-share-whatsapp').click(function() {\n\t\tsetTimeout( function() {\n\t\t\tapplication.shareLink('whatsapp');\n\t\t}, 100);\n\t});\n\n\t$('.js-share-sms').click(function(el) {\n\t\tsetTimeout( function() {\n\t\t\tapplication.shareLink('sms');\n\t\t}, 100);\n\t});\n\n\t$(document).on('enable_shaker', function() {\n\t\tshaker.enable();\n\t});\n\n\t$(document).on('disable_shaker', function() {\n\t\tshaker.disable();\n\t});\n\n\t$(document).on('protoss', function() {\n\t\tapplication.toss();\n\t});\n\n\t// Temp event to test transitions (gray box)\n\t// $('.nextStage').click(function() {\n\t// \t$('.toss-stage').addClass('hide');\n\t// \t$('.share-stage').removeClass('hide');\n\t// });\n});\n","module.exports = function(imageArr, callback){\n\tvar $progress = $('#progress').text('0%'),\n\t\tloader = new PxLoader();\n\n\t// loader.addProgressListener(function(e) { \n // \t\tconsole.log(e.completedCount + ' / ' + e.totalCount);\n\t//     // the event provides stats on the number of completed items \n\t//     $progress.innerHt(e.completedCount + ' / ' + e.totalCount); \n\t// });\n\n\tloader.addCompletionListener(callback);\n\n\tfor(var i= 0; i < imageArr.length; i++){\n\t\tvar pxImage = new PxLoaderImage(imageArr[i]); \n\t\tloader.addImage(pxImage);\n\t}\n\n\tthis.start = function() {\n\t\tloader.start();\n\t};\n\n\treturn this;\n}\n\n\n// PRELOADER PRELOADER PRELOADER PRELOADER PRELOADER","module.exports = function(callback) {\n\n\tvar Preload = require('preload');\n\n\tvar preload = new Preload(\n\t\t[\n\t\t\t'images/rotate_device.png',\n\t\t\t'images/bg_text_00.png',\n\t\t\t'images/loadingplates_01.png',\n\t\t\t'images/loadingplates_02.png',\n\t\t\t'images/loadingplates_03.png',\n\t\t\t'images/loadingplates_04.png',\n\t\t\t'images/loadingplates_05.png',\n\t\t\t'images/loadingplates_06.png',\n\t\t\t'images/loadingplates_07.png',\n\t\t\t'images/bg_text_short_01.png',\n\t\t\t'images/bg_text_short_02.png',\n\t\t\t'images/bg_text_short_03.png',\n\t\t\t'images/bg_text_short_04.png',\n\t\t\t'images/bg_text_short.png',\n\t\t\t'images/mainplate_ingredients_01.png',\n\t\t\t'images/mainplate_ingredients_02.png',\n\t\t\t'images/mainplate_ingredients_03.png',\n\t\t\t'images/mainplate_ingredients_04.png',\n\t\t\t'images/mainplate_ingredients_05.png',\n\t\t\t'images/fish_text.png',\n\t\t\t'images/pepper_text.png',\n\t\t\t'images/sauce_text.png',\n\t\t\t'images/crackers_text.png',\n\t\t\t'images/miniplate_0.png',\n\t\t\t'images/miniplate_1.png',\n\t\t\t'images/miniplate_2.png',\n\t\t\t'images/miniplate_3.png',\n\t\t\t'images/tossing/tossing_base.png',\n\t\t\t'images/tossing/tossing_01.png',\n\t\t\t'images/tossing/tossing_02.png',\n\t\t\t'images/tossing/tossing_03.png',\n\t\t\t'images/tossing/tossing_04.png',\n\t\t\t'images/bg_text_short_07.png',\n\t\t\t'images/bg_text_short_08.png',\n\t\t\t'images/mainplate_eaten_last.png',\n\t\t\t'images/mainplate_eatenpiece_01.png',\n\t\t\t'images/mainplate_eatenpiece_02.png',\n\t\t\t'images/mainplate_eatenpiece_03.png',\n\t\t\t'images/mainplate_eatenpiece_04.png',\n\t\t\t'images/mainplate_eatenpiece_05.png',\n\t\t\t'images/icon_wa.png',\n\t\t\t'images/icon_sms.png',\n\t\t\t'images/2359logo.png'\n\t\t],\n\t\tcallback\n\t);\n\n\tpreload.start();\n};","/******************************************************************************\n\tshaker.js\n\t\n\t- Handles device orientation.\n\n\t- When device orientation changes, we monitor the change and sense the\n\t  orientation.\n\n\t- Depending on orientation ( forwards / backwards ) we can then make the \n\t  required trigger which is handled in index.js\n\n******************************************************************************/\n\nvar deviceType,\n\tANDROID = 0,\n\tIOS = 1,\n\tWINDOWS = 2,\n\tUNKNOWN = -1;\n\nif (/Android/i.test(navigator.userAgent)) {\n\tdeviceType = ANDROID;\n} else if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\n\tdeviceType = IOS;\n}else if (/Windows/i.test(navigator.userAgent)) {\n\tdeviceType = WINDOWS;\n} else {\n\tdeviceType = UNKNOWN;\n}\n\nvar enabled \t\t\t= false;\nvar highpointReached \t= false;\nvar preventToss \t\t= false;\n\nvar enable = function() {\n\tenabled = true;\n\tif (window.DeviceMotionEvent) {\n\t  // Listen for the event and handle DeviceOrientationEvent object\n\t  // window.addEventListener( 'deviceorientation', tiltHandler );\n\t  window.addEventListener( 'devicemotion', tiltHandler );\n\t}\n\telse {\n\t\tconsole.error('DeviceMotionEvent undefined');\n\t}\n\treturn;\n};\n\nvar disable = function() {\n\tenabled = false;\n\tif (window.DeviceMotionEvent) {\n\t  // Listen for the event and handle DeviceOrientationEvent object\n\t  // window.addEventListener( 'deviceorientation', tiltHandler );\n\t  window.removeEventListener( 'devicemotion', tiltHandler );\n\t}\n\telse {\n\t\tconsole.error('DeviceMotionEvent undefined');\n\t}\n\treturn;\n};\n\nvar androidTiltHandler = function(evt) {\n\tvar zAcceleration = Math.round(evt.accelerationIncludingGravity.z);\n\n\t// $(\"#debug2\").html(\"<h3>Android Acceleration</h3><ul><li>X: \"+Math.round(evt.accelerationIncludingGravity.x)+\"</li><li>Y: \"+Math.round(evt.accelerationIncludingGravity.y)+\"</li><li>Z: \"+Math.round(evt.accelerationIncludingGravity.z)+\"</li></ul>\");\n\t// $(\"#debug3\").html(\"<h3>Rotation</h3><ul><li>X: \"+Math.round(evt.rotationRate.alpha)+\"</li><li>Y: \"+Math.round(evt.rotationRate.beta)+\"</li><li>Z: \"+Math.round(evt.rotationRate.gamma)+\"</li></ul>\");\n\t// $(\"#debug4\").html(\"<h3>Prevent Toss</h3><ul><li>\"+preventToss+\"</li></ul>\");\n\n\tif(zAcceleration > 0) {\n\t\tif(!highpointReached) {\n\t\t\thighpointReached = true;\n\t\t}\n\t\treturn;\n\t}\n\tif(zAcceleration < 10 && highpointReached) {\n\t\thighpointReached = false;\n\t\tdisable(); // Disable further tosses while showing toss.\n\t\t$(document).trigger('protoss'); // Trigger tossing\n\t}\n}\n\nvar iosTiltHandler = function(evt) {\n\tvar zAcceleration = Math.round(evt.accelerationIncludingGravity.z);\n\n\t// $(\"#debug2\").html(\"<h3>IOS Acceleration</h3><ul><li>X: \"+Math.round(evt.accelerationIncludingGravity.x)+\"</li><li>Y: \"+Math.round(evt.accelerationIncludingGravity.y)+\"</li><li>Z: \"+Math.round(evt.accelerationIncludingGravity.z)+\"</li></ul>\");\n\t// $(\"#debug3\").html(\"<h3>Rotation</h3><ul><li>X: \"+Math.round(evt.rotationRate.alpha)+\"</li><li>Y: \"+Math.round(evt.rotationRate.beta)+\"</li><li>Z: \"+Math.round(evt.rotationRate.gamma)+\"</li></ul>\");\n\t// $(\"#debug4\").html(\"<h3>Prevent Toss</h3><ul><li>\"+preventToss+\"</li></ul>\");\n\n\tif(zAcceleration >= 2) {\n\t\tif(!highpointReached) {\n\t\t\thighpointReached = true;\n\t\t}\n\t\treturn;\n\t}\n\tif(zAcceleration <= -12 && highpointReached) {\n\t\thighpointReached = false;\n\t\tdisable(); // Disable further tosses while showing toss.\n\t\t$(document).trigger('protoss'); // Trigger tossing\n\t}\n};\n\nfunction tiltHandler( evt ) {\n\tif(!enabled) return;\n\n\tif (deviceType === ANDROID) {\n\t\tandroidTiltHandler(evt);\n\t} else if (deviceType === IOS || deviceType === WINDOWS) {\n\t\tiosTiltHandler(evt);\n\t}\n};\n\nvar supportsTilt = function() {\n\treturn (window.DeviceOrientationEvent && typeof window.orientation !== \"undefined\");\n};\n\nmodule.exports = {\n\tsupportsTilt: supportsTilt,\n\tenable \t\t: enable,\n\tdisable \t: disable\n};","var reqAnimationFrame = (function () {\n    return window[Hammer.prefixed(window, 'requestAnimationFrame')] || function (callback) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n})();\n\nvar screen = document.querySelector(\".ingredients-stage\");\nvar el = document.getElementById('mini-plate-container');\n\n// var START_X = Math.round(el.offsetWidth);\n// var START_Y = Math.round(el.offsetHeight);\n\nvar START_X = 0;\nvar START_Y = -1100;\n\nvar miniPlateContainer = new Hammer(el);\n\nminiPlateContainer.get('swipe').set({ direction: Hammer.DIRECTION_VERTICAL });\n\nminiPlateContainer.on('swipe', onSwipe);\n\nvar ticking = false;\nvar transform;\nvar timer;\n\nfunction resetElement() {\n    el.className = 'animate';\n    transform = {\n        translate: { x: START_X, y: START_Y },\n        scale: 1,\n        angle: 0,\n        rx: 0,\n        ry: 0,\n        rz: 0\n    };\n    requestElementUpdate();\n};\n\nfunction updateElementTransform() {\n    var value = [\n        'translate3d(' + transform.translate.x + 'px, ' + transform.translate.y + 'px, 0)',\n        'scale(' + transform.scale + ', ' + transform.scale + ')',\n        'rotate3d('+ transform.rx +','+ transform.ry +','+ transform.rz +','+  transform.angle + 'deg)'\n    ];\n\n    value = value.join(\" \");\n    el.style.webkitTransform = value;\n    el.style.mozTransform = value;\n    el.style.transform = value;\n    ticking = false;\n};\n\nfunction requestElementUpdate() {\n    if(!ticking) {\n        reqAnimationFrame(updateElementTransform);\n        ticking = true;\n    }\n};\n\nfunction onSwipe(ev) {\n    var angle = 50;\n    transform.ry = (ev.direction & Hammer.DIRECTION_HORIZONTAL) ? 1 : 0;\n    transform.rx = (ev.direction & Hammer.DIRECTION_VERTICAL) ? 1 : 0;\n    transform.angle = (ev.direction & (Hammer.DIRECTION_RIGHT | Hammer.DIRECTION_UP)) ? angle : -angle;\n\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n        resetElement();\n    }, 300);\n\n    requestElementUpdate();\n};\n\nresetElement();\n\n\n\n"]}